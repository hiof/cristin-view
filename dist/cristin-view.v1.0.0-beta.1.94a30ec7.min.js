/*! cristin-view v1.0.0-beta.1 by HiØ, Kenneth Dahlstrøm <kld@hiof.no>, released: 15:05 06-04-2016, license: GPL-3.0 */function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}this.Hiof=this.Hiof||{},this.Hiof.Templates=this.Hiof.Templates||{},this.Hiof.Templates["cristin/list"]=Handlebars.template({1:function(depth0,helpers,partials,data){var stack1,helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,buffer="    <tr>\n      <td>"+escapeExpression((helper=null!=(helper=helpers.title||(null!=depth0?depth0.title:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+"</td>\n      <td>"+escapeExpression((helper=null!=(helper=helpers.pubYear||(null!=depth0?depth0.pubYear:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"pubYear",hash:{},data:data}):helper))+"</td>\n      <td>"+escapeExpression((helper=null!=(helper=helpers.category||(null!=depth0?depth0.category:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"category",hash:{},data:data}):helper))+" -> "+escapeExpression((helper=null!=(helper=helpers.categorySub||(null!=depth0?depth0.categorySub:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"categorySub",hash:{},data:data}):helper))+"</td>\n      <td>";return stack1=(helpers.ifCond||depth0&&depth0.ifCond||helperMissing).call(depth0,null!=depth0?depth0.category:depth0,"Bok",{name:"ifCond",hash:{},fn:this.program(2,data),inverse:this.program(4,data),data:data}),null!=stack1&&(buffer+=stack1),buffer+"</td>\n    </tr>\n"},2:function(depth0,helpers,partials,data){var helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return'<a href="http://bibsys-almaprimo.hosted.exlibrisgroup.com/primo_library/libweb/action/dlSearch.do?vid=HIO&institution=HIO&institution=HIO&search_scope=default_scope&lang=nor&afterPDS=true&check=checked&query=any,contains,'+escapeExpression((helper=null!=(helper=helpers.searchterm||(null!=depth0?depth0.searchterm:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"searchterm",hash:{},data:data}):helper))+'" title="Søk etter følgende publisering hos biblioteket: '+escapeExpression((helper=null!=(helper=helpers.title||(null!=depth0?depth0.title:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+'">Se bok</a>'},4:function(depth0,helpers,partials,data){return""},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,buffer='<h3>CRIStin publiseringer</h3>\n<table  data-page-size="10" class="footable cristin-publications">\n  <thead>\n    <tr>\n      <th>Tittel</th>\n      <th data-hide="all">Publisert</th>\n      <th data-hide="all">Kategori</th>\n      <th>Se publisering</th>\n    </tr>\n  </thead>\n  <tbody>\n';return stack1=helpers.each.call(depth0,null!=depth0?depth0.research:depth0,{name:"each",hash:{},fn:this.program(1,data),inverse:this.noop,data:data}),null!=stack1&&(buffer+=stack1),buffer+'  </tbody>\n  <tfoot class="hide-if-no-paging">\n    <tr>\n      <td colspan="4">\n        <div class="pagination-centered">\n          <ul class="pagination">\n          </ul>\n        </div>\n      </td>\n    </tr>\n\n  </tfoot>\n</table>\n'},useData:!0}),this.Hiof.Templates["modal/generic"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,buffer='<div class="modal fade" id="modal-'+escapeExpression((helper=null!=(helper=helpers.modalId||(null!=depth0?depth0.modalId:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"modalId",hash:{},data:data}):helper))+'" tabindex="-1" role="dialog" aria-labelledby="'+escapeExpression((helper=null!=(helper=helpers.modalId||(null!=depth0?depth0.modalId:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"modalId",hash:{},data:data}):helper))+'Label" aria-hidden="true">\n		<div class="modal-dialog">\n				<div class="modal-content">\n						<div class="modal-header">\n								<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n								<h4 class="modal-title" id="'+escapeExpression((helper=null!=(helper=helpers.modalId||(null!=depth0?depth0.modalId:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"modalId",hash:{},data:data}):helper))+'Label">'+escapeExpression((helper=null!=(helper=helpers.title||(null!=depth0?depth0.title:depth0))?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"title",hash:{},data:data}):helper))+'</h4>\n						</div>\n						<div class="modal-body">\n							';return helper=null!=(helper=helpers.body||(null!=depth0?depth0.body:depth0))?helper:helperMissing,stack1=typeof helper===functionType?helper.call(depth0,{name:"body",hash:{},data:data}):helper,null!=stack1&&(buffer+=stack1),buffer+='\n						</div>\n						<div class="modal-footer">\n							',helper=null!=(helper=helpers.footer||(null!=depth0?depth0.footer:depth0))?helper:helperMissing,stack1=typeof helper===functionType?helper.call(depth0,{name:"footer",hash:{},data:data}):helper,null!=stack1&&(buffer+=stack1),buffer+"\n						</div>\n				</div>\n		</div>\n</div>\n\n"},useData:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),CristinView=function(){function CristinView(){_classCallCheck(this,CristinView),this.view=new View,this.listTemplate=Hiof.Templates["cristin/list"],this.defaults={url:"//hiof.no/api/v1/cristin/",username:"haraldh"},this.options=this.setupOptions()}return _createClass(CristinView,[{key:"render",value:function(){var settings=(arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_extends({},this.defaults,this.options)),that=this;this.view.getData(settings,that).success(function(data){var templateSource=that.listTemplate,markup=templateSource(data);$(".cristin-load").append(markup),$(".cristin-publications").footable({breakpoints:{phone:640,tablet:899,desktop:900}})})}},{key:"setupOptions",value:function(el){var thisLoader=void 0;thisLoader="undefined"==typeof el?$(".cristin-load"):$(el);var thisUsername=null;return thisLoader.attr("data-username")&&(thisUsername=thisLoader.attr("data-username")),options={username:thisUsername},options}}]),CristinView}();!function(Hiof,undefined){$(function(){if($(".cristin-load").length){var cristin=new CristinView;cristin.render()}})}(window.Hiof=window.Hiof||{});